"use strict";var Mover={Models:{List:{}},Collections:{FirstCollection:{},SecondCollection:{},ThirdCollection:{}},Views:{ViewOne:{},ViewTwo:{},ViewThree:{},AppView:{}},Routers:{},models:{},collections:{collectionOne:{},collectionTwo:{},collectionThree:{}},views:{firstView:{},secondView:{},thirdView:{}},routers:{}};Mover.Models.List=Backbone.Model.extend({idAttribute:"_id"}),Mover.Collections.FirstCollection=Backbone.Collection.extend({model:Mover.Models.List,url:"http://tiny-pizza-server.herokuapp.com/collections/dbMovingCollectionOne"}),Mover.Collections.SecondCollection=Backbone.Collection.extend({model:Mover.Models.List,url:"http://tiny-pizza-server.herokuapp.com/collections/dbMovingCollectionTwo"}),Mover.Collections.ThirdCollection=Backbone.Collection.extend({model:Mover.Models.List,url:"http://tiny-pizza-server.herokuapp.com/collections/dbMovingCollectionThree"}),Mover.Views.ViewOne=Backbone.View.extend({template:_.template($(".list-one-template").html()),className:"collection-one-item",events:{"click .delete-button":"destroy","click .copy-to-two":"copyTwo","click .copy-to-three":"copyThree","click .move-to-two":"moveToTwo","click .move-to-three":"moveToThree"},initialize:function(){this.listenTo(this.model,"destroy",this.remove),$(".collection-one").append(this.el),this.render(),this.model.isNew()&&(this.model.set({time:Date.now()}),this.model.save())},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},destroy:function(){this.model.destroy()},copyTwo:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionTwo.add(a)},copyThree:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionThree.add(a)},moveToTwo:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionTwo.add(a),this.destroy()},moveToThree:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionThree.add(a),this.destroy()}}),Mover.Views.ViewTwo=Backbone.View.extend({template:_.template($(".list-two-template").html()),className:"collection-two-item",events:{"click .delete-button":"destroy","click .copy-to-one":"copyOne","click .copy-to-three":"copyThree","click .move-to-one":"moveToOne","click .move-to-three":"moveToThree"},initialize:function(){this.listenTo(this.model,"destroy",this.remove),$(".collection-two").append(this.el),this.render(),this.model.isNew()&&(this.model.set({time:Date.now()}),this.model.save())},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},destroy:function(){this.model.destroy()},copyOne:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionOne.add(a)},copyThree:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionThree.add(a)},moveToOne:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionOne.add(a),this.destroy()},moveToThree:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionThree.add(a),this.destroy()}}),Mover.Views.ViewThree=Backbone.View.extend({template:_.template($(".list-three-template").html()),className:"collection-three-item",events:{"click .delete-button":"destroy","click .copy-to-one":"copyOne","click .copy-to-two":"copyTwo","click .move-to-one":"moveToOne","click .move-to-two":"moveToTwo"},initialize:function(){this.listenTo(this.model,"destroy",this.remove),$(".collection-three").append(this.el),this.render(),this.model.isNew()&&(this.model.set({time:Date.now()}),this.model.save())},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},destroy:function(){this.model.destroy()},copyOne:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionOne.add(a)},copyTwo:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionTwo.add(a)},moveToOne:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionOne.add(a),this.destroy()},moveToTwo:function(){var a=this.model.clone();a.unset("_id"),Mover.collections.collectionTwo.add(a),this.destroy()}}),Mover.Views.AppView=Backbone.View.extend({initialize:function(){Mover.collections.collectionOne=new Mover.Collections.FirstCollection,Mover.collections.collectionTwo=new Mover.Collections.SecondCollection,Mover.collections.collectionThree=new Mover.Collections.ThirdCollection,Mover.collections.collectionOne.fetch(),Mover.collections.collectionTwo.fetch(),Mover.collections.collectionThree.fetch(),this.listenTo(Mover.collections.collectionOne,"add",function(a){Mover.views.firstView=new Mover.Views.ViewOne({model:a})}),this.listenTo(Mover.collections.collectionTwo,"add",function(a){Mover.views.secondView=new Mover.Views.ViewTwo({model:a})}),this.listenTo(Mover.collections.collectionThree,"add",function(a){Mover.views.thirdView=new Mover.Views.ViewThree({model:a})})}}),new Mover.Views.AppView;var rotation=0;jQuery.fn.rotate=function(a){return $(this).css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"}),$(this)},$(".new-item").click(function(){$(".create-item").hasClass("show-item-create")?($(".new-item span").text("Create New"),rotation+=135,$(".new-item img").rotate(rotation)):($(".new-item span").text("Close"),$("#new-input").focus(),rotation+=135,$(".new-item img").rotate(rotation)),$(".create-item").toggleClass("show-item-create"),$(".create-item").animate({height:"toggle"},400,function(){})});var checkedBox=$("input:checkbox:checked");$(".create-item-form").find("label").mouseenter(function(){$(this).children("span").css({border:"2px solid #362a34"})}),$(".create-item-form").find("label").mouseleave(function(){var a=$(this);$(this).children("span").css(a!==checkedBox?{border:"#e6e6e6"}:{border:"#red"})}),$(".new-input").focusin(function(){$(this).css("border-color","#362a34")}),$(".new-input").focusout(function(){$(this).css("border-color","#e6e6e6")}),$(".save-item").click(function(){var a=[];if(""!==$(".new-input").val()&&$("input:checkbox:checked").length>0){var b=$(".new-input").val();$("input:checkbox:checked").each(function(b){return a[b]=$(this).val()}),_.each(a,function(a){if("saveOne"===a){var c=new Mover.Models.List({item:b});Mover.collections.collectionOne.add(c)}else if("saveTwo"===a){var c=new Mover.Models.List({item:b});Mover.collections.collectionTwo.add(c)}else if("saveThree"===a){var c=new Mover.Models.List({item:b});Mover.collections.collectionThree.add(c)}}),$("input:checkbox:checked").attr("checked",!1),$(".new-input").val(""),$(".new-item span").text("Create New"),rotation+=135,$(".new-item img").rotate(rotation),$(".create-item").toggleClass("show-item-create"),$(".create-item").animate({height:"toggle"},400,function(){})}else alert("You must add a new list item and select a list to add the item to before saving")});